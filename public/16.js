(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{43:function(t,e,s){"use strict";s.r(e);var a=s(1),o=s.n(a),r={data:function(){return{clor_pk:this.$route.params.id,valid:!1,sales:[],stores:[],clients:[],payments:[],paymentsOriginal:[],saleHeader:"",saleDetail:[],desserts:[],selectClient:"",selectStore:"",selectpame:"",snackbar:!1,timeout:2e3,subtotal:0,total:0,iva:0,ieps:0,efectivo:0,tarjeta:0,textMsg:"",editado:{clod_pk:0,clod_quantity:0},editadoSale:{clsa_pk:0,clie_fk:0,pame_fk:0,stor_fk:0,clde_amount:0,clpa_amount_cash:0,clpa_amount_transfer:0},dialogcredito:!1,dialogcontado:!1,loading:!1,dialogQuestion:!1,dialogQuestionDelete:!1,messageQuestion:"",minNumberRules:[function(t){return!!t||"Requerido."},function(t){return t>0||"El número debe ser mayor o igual a cero"}]}},created:function(){this.createsale()},methods:{formatMoney:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";try{e=Math.abs(e),e=isNaN(e)?2:e;var o=t<0?"-":"",r=parseInt(t=Math.abs(Number(t)||0).toFixed(e)).toString(),i=r.length>3?r.length%3:0;return o+(i?r.substr(0,i)+a:"")+r.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?s+Math.abs(t-r).toFixed(e).slice(2):"")}catch(t){console.log(t)}},formatPrice:function(t){return(t/1).toFixed(2).replace(",",".").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},createsale:function(){var t=this;this.loading=!0,axios.get("/client/orders/"+this.clor_pk).then((function(e){setTimeout((function(){return t.loading=!1}),500),null!=e.data.data?(console.log(e.data),t.sales=e.data.data,t.saleHeader=e.data.data.order,t.desserts=t.sales.order_details,t.getTotal()):t.normal("Notificación",e.data.status.message,"error")})).catch((function(e){console.log(e),t.normal("Notificación","Error al cargar los datos","error")}))},getTotal:function(){this.iva=0,this.ieps=0;for(var t=0;t<this.desserts.length;t++){this.subtotal=this.subtotal+this.desserts[t].clod_price*this.desserts[t].clod_quantity;var e=this.desserts[t].clod_price*this.desserts[t].clod_quantity;1==this.desserts[t].prod_iva&&(this.iva=this.iva+e/(1+this.desserts[t].syst_iva/100)*(this.desserts[t].syst_iva/100)),1==this.desserts[t].prod_ieps&&(this.ieps=this.ieps+e/(1+this.desserts[t].syst_ieps/100)*(this.desserts[t].syst_ieps/100))}this.total=this.subtotal},normal:function(t,e,s){this.notice=new o.a({title:t,description:e,className:"open-normal",closable:!0,duration:3,type:s})}}},i=s(0),l=Object(i.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",[s("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("v-card",{attrs:{color:"white"}},[s("v-card-text",[t._v("\r\n                    Cargando\r\n                    "),s("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"green"}})],1)],1)],1),t._v(" "),s("v-snackbar",{attrs:{color:"#000000",timeout:t.timeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\r\n            "+t._s(t.textMsg)+"\r\n            "),s("v-btn",{attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\r\n                Cerrar\r\n            ")])],1),t._v(" "),s("v-row",[s("v-col",[s("v-card",[s("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-card-title",{staticClass:"subheading font-weight-bold"},[t._v("No. Pedido: "+t._s(t.saleHeader.clor_identifier))]),t._v(" "),s("v-divider"),t._v(" "),s("v-row",[s("v-col",{attrs:{cols:"4"}},[s("v-card-text",{staticClass:"category d-inline-flex font-weight-light"},[s("v-label",[s("h4",[t._v("Cliente:")]),t._v(" "+t._s(t.saleHeader.clie_name)+"\r\n                                    ")])],1)],1),t._v(" "),s("v-col",{attrs:{cols:"4"}},[s("v-card-text",{staticClass:"category d-inline-flex font-weight-light"},[s("v-label",[s("h4",[t._v("Vendedor:")]),t._v(t._s(t.saleHeader.user)+"\r\n                                    ")])],1)],1),t._v(" "),s("v-col",{attrs:{cols:"4"}},[s("v-card-text",{staticClass:"category d-inline-flex font-weight-light"},[s("v-label",[s("h4",[t._v("Sucursal:")]),t._v(" "+t._s(t.saleHeader.stor_name)+"\r\n                                    ")])],1)],1)],1)],1)],1)],1)],1),t._v(" "),s("v-row",[s("v-col",[s("v-card",[s("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[t._v("ID")]),t._v(" "),s("th",{staticClass:"text-left"},[t._v("Producto")]),t._v(" "),s("th",{staticClass:"text-left"},[t._v("Unidad Medida")]),t._v(" "),s("th",{staticClass:"text-left"},[t._v("Cantidad")]),t._v(" "),s("th",{staticClass:"text-left"},[t._v("Precio")]),t._v(" "),s("th",{staticClass:"text-left"},[t._v("Importe")]),t._v(" "),s("th"),t._v(" "),s("th")])]),t._v(" "),s("tbody",[t._l(t.desserts,(function(e){return s("tr",{key:e.prod_name},[s("td",[t._v(t._s(e.prod_identifier))]),t._v(" "),s("td",[t._v(t._s(e.prod_name))]),t._v(" "),s("td",[t._v(t._s(e.meas_name))]),t._v(" "),s("td",[t._v(t._s(e.clod_quantity))]),t._v(" "),s("td",[t._v("$"+t._s(t.formatMoney(e.clod_price)))]),t._v(" "),s("td",[t._v("$"+t._s(t.formatMoney(e.clod_quantity*e.clod_price)))]),t._v(" "),s("td")])})),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("Subtotal")]),t._v(" "),s("td",[t._v("$"+t._s(t.formatMoney(t.subtotal)))]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("IVA")]),t._v(" "),s("td",[t._v("$"+t._s(t.formatMoney(t.iva)))]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("IEPS")]),t._v(" "),s("td",[t._v("$"+t._s(t.formatMoney(t.ieps)))]),t._v(" "),s("td")])],2),t._v(" "),s("tfoot",[s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td",[t._v("Total")]),t._v(" "),s("td",[t._v("$"+t._s(t.formatMoney(t.total)))]),t._v(" "),s("td")])])]},proxy:!0}])})],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=l.exports}}]);